package com.student.schooldetails.repository;


import static org.assertj.core.api.AssertionsForClassTypes.assertThat;

import java.util.List;

import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;

import com.student.schooldetails.entity.Student;

@DataJpaTest
public class StudentRepositoryTest {

	@Autowired
	private StudentRepository studentRepository;
	Student student;
	
	@BeforeEach
	void setUp() {
		student = new Student(1L,"John Doe","Spring High School");
		studentRepository.save(student);
	}
	@AfterEach
	void tearDown() {
		student =null;
		studentRepository.deleteAll();
	}
	
	// Test success
	
	@Test
	void testFindBySchoolName_Found() {
		List<Student> studentsList = studentRepository.findBySchoolName("Spring High School");

		//assertThat(studentsList).isNotEmpty();
		assertThat(studentsList.get(0).getId()).isEqualTo(student.getId());
		assertThat(studentsList.get(0).getSchoolName()).isEqualTo(student.getSchoolName());
	}

	
}
